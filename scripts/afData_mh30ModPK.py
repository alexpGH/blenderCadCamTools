#MIT License
#Copyright 2020 Alexander Poddey
#
#Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

#The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

#THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


# see also https://m-selig.ae.illinois.edu/ads/coord_database.html
# if you are looking for 2d airfoil data

# quality might be 'full', 'medium', 'low'. Note in blender we will fit a bezier curve through the points,
# therfore a medium number of points is typically sufficcinet. Otherwsize the 3D mesh might get impractically large!
#
# scale: scaling factor appiled to the 2d profile. It is by default of chordlenght 1
#
# shiftV: [dx,dy,dz] added to the profile. allows you to place the leading edge where you need it
#
# The 2d profile starts ath the trailing edge (@ y=-1, goes over positive z to the leading edge and in negative z back again)
# This follows the selig format. 
#
import math
import numpy as np

#    MH30 (9.18 / 1.62) mod. by Philip Kolb https://www.rc-network.de/threads/stingray-profilfrage.173616/
#    intended for ResqrtCl 200-240 k
def coords(quality,scale,shiftV):

    if(quality=='super'):
        coords=scale*np.array([
            [0.0,-1.000019, 0.000581],
            [0.0,-0.995310, 0.001012],
            [0.0,-0.986342, 0.001963],
            [0.0,-0.976125, 0.003187],
            [0.0,-0.965374, 0.004564],
            [0.0,-0.954458, 0.006028],
            [0.0,-0.943485, 0.007544],
            [0.0,-0.932465, 0.009106],
            [0.0,-0.921411, 0.010687],
            [0.0,-0.910354, 0.012287],
            [0.0,-0.899273, 0.013896],
            [0.0,-0.888204, 0.015509],
            [0.0,-0.877128, 0.017117],
            [0.0,-0.866061, 0.018721],
            [0.0,-0.854992, 0.020314],
            [0.0,-0.843932, 0.021896],
            [0.0,-0.832877, 0.023457],
            [0.0,-0.821827, 0.025003],
            [0.0,-0.810781, 0.026524],
            [0.0,-0.799731, 0.028026],
            [0.0,-0.788712, 0.029498],
            [0.0,-0.777679, 0.030935],
            [0.0,-0.766660, 0.032344],
            [0.0,-0.755633, 0.033712],
            [0.0,-0.744596, 0.035054],
            [0.0,-0.733566, 0.036356],
            [0.0,-0.722527, 0.037628],
            [0.0,-0.711493, 0.038860],
            [0.0,-0.700446, 0.040059],
            [0.0,-0.689400, 0.041222],
            [0.0,-0.678345, 0.042352],
            [0.0,-0.667293, 0.043446],
            [0.0,-0.656230, 0.044504],
            [0.0,-0.645159, 0.045532],
            [0.0,-0.634091, 0.046525],
            [0.0,-0.623009, 0.047487],
            [0.0,-0.611923, 0.048420],
            [0.0,-0.600844, 0.049321],
            [0.0,-0.589754, 0.050189],
            [0.0,-0.578652, 0.051031],
            [0.0,-0.567557, 0.051844],
            [0.0,-0.556455, 0.052627],
            [0.0,-0.545344, 0.053384],
            [0.0,-0.534245, 0.054113],
            [0.0,-0.523145, 0.054808],
            [0.0,-0.512045, 0.055475],
            [0.0,-0.500951, 0.056107],
            [0.0,-0.489854, 0.056706],
            [0.0,-0.478764, 0.057268],
            [0.0,-0.467673, 0.057794],
            [0.0,-0.456582, 0.058282],
            [0.0,-0.445491, 0.058733],
            [0.0,-0.434400, 0.059145],
            [0.0,-0.423306, 0.059518],
            [0.0,-0.412214, 0.059855],
            [0.0,-0.401128, 0.060150],
            [0.0,-0.390038, 0.060404],
            [0.0,-0.378955, 0.060618],
            [0.0,-0.367874, 0.060788],
            [0.0,-0.356798, 0.060914],
            [0.0,-0.345729, 0.060991],
            [0.0,-0.334664, 0.061022],
            [0.0,-0.323613, 0.061001],
            [0.0,-0.312559, 0.060926],
            [0.0,-0.301519, 0.060798],
            [0.0,-0.290489, 0.060610],
            [0.0,-0.279457, 0.060363],
            [0.0,-0.268437, 0.060056],
            [0.0,-0.257421, 0.059686],
            [0.0,-0.246415, 0.059254],
            [0.0,-0.235424, 0.058755],
            [0.0,-0.224455, 0.058187],
            [0.0,-0.213510, 0.057541],
            [0.0,-0.202583, 0.056813],
            [0.0,-0.191684, 0.055999],
            [0.0,-0.180814, 0.055092],
            [0.0,-0.169976, 0.054086],
            [0.0,-0.159174, 0.052973],
            [0.0,-0.148416, 0.051747],
            [0.0,-0.137709, 0.050398],
            [0.0,-0.127057, 0.048916],
            [0.0,-0.116473, 0.047292],
            [0.0,-0.105970, 0.045513],
            [0.0,-0.095570, 0.043565],
            [0.0,-0.085287, 0.041431],
            [0.0,-0.075151, 0.039094],
            [0.0,-0.065203, 0.036535],
            [0.0,-0.055484, 0.033729],
            [0.0,-0.046068, 0.030664],
            [0.0,-0.037080, 0.027331],
            [0.0,-0.028690, 0.023748],
            [0.0,-0.021211, 0.020033],
            [0.0,-0.015014, 0.016409],
            [0.0,-0.010308, 0.013167],
            [0.0,-0.006947, 0.010442],
            [0.0,-0.004581, 0.008179],
            [0.0,-0.002900, 0.006266],
            [0.0,-0.001697, 0.004607],
            [0.0,-0.000856, 0.003131],
            [0.0,-0.000309, 0.001786],
            [0.0,-0.000036, 0.000558],
            [0.0,-0.000057, -0.000616],
            [0.0,-0.000527, -0.001771],
            [0.0,-0.001373, -0.002927],
            [0.0,-0.002560, -0.004111],
            [0.0,-0.004147, -0.005373],
            [0.0,-0.006266, -0.006768],
            [0.0,-0.009154, -0.008365],
            [0.0,-0.013186, -0.010237],
            [0.0,-0.018789, -0.012399],
            [0.0,-0.026102, -0.014727],
            [0.0,-0.034738, -0.016992],
            [0.0,-0.044180, -0.019041],
            [0.0,-0.054102, -0.020842],
            [0.0,-0.064308, -0.022408],
            [0.0,-0.074710, -0.023763],
            [0.0,-0.085250, -0.024933],
            [0.0,-0.095897, -0.025939],
            [0.0,-0.106633, -0.026803],
            [0.0,-0.117439, -0.027542],
            [0.0,-0.128302, -0.028173],
            [0.0,-0.139212, -0.028704],
            [0.0,-0.150161, -0.029152],
            [0.0,-0.161138, -0.029521],
            [0.0,-0.172142, -0.029822],
            [0.0,-0.183164, -0.030057],
            [0.0,-0.194208, -0.030235],
            [0.0,-0.205270, -0.030361],
            [0.0,-0.216345, -0.030439],
            [0.0,-0.227435, -0.030473],
            [0.0,-0.238534, -0.030469],
            [0.0,-0.249635, -0.030426],
            [0.0,-0.260752, -0.030348],
            [0.0,-0.271873, -0.030239],
            [0.0,-0.283000, -0.030099],
            [0.0,-0.294133, -0.029931],
            [0.0,-0.305270, -0.029737],
            [0.0,-0.316414, -0.029518],
            [0.0,-0.327559, -0.029277],
            [0.0,-0.338707, -0.029013],
            [0.0,-0.349860, -0.028729],
            [0.0,-0.361012, -0.028425],
            [0.0,-0.372167, -0.028100],
            [0.0,-0.383329, -0.027759],
            [0.0,-0.394493, -0.027401],
            [0.0,-0.405658, -0.027028],
            [0.0,-0.416826, -0.026640],
            [0.0,-0.427995, -0.026239],
            [0.0,-0.439165, -0.025824],
            [0.0,-0.450337, -0.025397],
            [0.0,-0.461507, -0.024957],
            [0.0,-0.472681, -0.024506],
            [0.0,-0.483852, -0.024043],
            [0.0,-0.495027, -0.023567],
            [0.0,-0.506211, -0.023082],
            [0.0,-0.517385, -0.022591],
            [0.0,-0.528564, -0.022087],
            [0.0,-0.539751, -0.021578],
            [0.0,-0.550928, -0.021062],
            [0.0,-0.562112, -0.020537],
            [0.0,-0.573297, -0.020006],
            [0.0,-0.584487, -0.019469],
            [0.0,-0.595668, -0.018927],
            [0.0,-0.606845, -0.018376],
            [0.0,-0.618036, -0.017823],
            [0.0,-0.629225, -0.017267],
            [0.0,-0.640415, -0.016706],
            [0.0,-0.651606, -0.016141],
            [0.0,-0.662798, -0.015571],
            [0.0,-0.673991, -0.015001],
            [0.0,-0.685176, -0.014427],
            [0.0,-0.696360, -0.013848],
            [0.0,-0.707544, -0.013271],
            [0.0,-0.718730, -0.012690],
            [0.0,-0.729919, -0.012110],
            [0.0,-0.741107, -0.011529],
            [0.0,-0.752296, -0.010950],
            [0.0,-0.763486, -0.010370],
            [0.0,-0.774678, -0.009791],
            [0.0,-0.785867, -0.009214],
            [0.0,-0.797055, -0.008642],
            [0.0,-0.808238, -0.008075],
            [0.0,-0.819420, -0.007516],
            [0.0,-0.830596, -0.006963],
            [0.0,-0.841773, -0.006422],
            [0.0,-0.852949, -0.005888],
            [0.0,-0.864115, -0.005367],
            [0.0,-0.875282, -0.004857],
            [0.0,-0.886441, -0.004362],
            [0.0,-0.897592, -0.003885],
            [0.0,-0.908749, -0.003426],
            [0.0,-0.919896, -0.002983],
            [0.0,-0.931030, -0.002565],
            [0.0,-0.942166, -0.002170],
            [0.0,-0.953275, -0.001802],
            [0.0,-0.964374, -0.001469],
            [0.0,-0.975394, -0.001159],
            [0.0,-0.985962, -0.000882],
            [0.0,-0.995220, -0.000663],
            [0.0,-0.999981, -0.000581]])+shiftV


    
    elif(quality=='low'):

        coords=scale*np.array([
            [0.0, -1.0000189542770386, 0.0005810000002384186],
            [0.0, -0.7666599750518799, 0.03234399855136871],
            [0.0, -0.6451590061187744, 0.045531999319791794],
            [0.0, -0.5675569772720337, 0.051844000816345215],
            [0.0, -0.47876399755477905, 0.05726800113916397],
            [0.0, -0.40112799406051636, 0.06015000119805336],
            [0.0, -0.334663987159729, 0.06102199852466583],
            [0.0, -0.268436998128891, 0.06005600094795227],
            [0.0, -0.20258300006389618, 0.05681300163269043],
            [0.0, -0.14841599762439728, 0.051747001707553864],
            [0.0, -0.10597000271081924, 0.04551300033926964],
            [0.0, -0.06520300358533859, 0.03653499856591225],
            [0.0, -0.03708000108599663, 0.027331000193953514],
            [0.0, -0.02121100015938282, 0.02003300003707409],
            [0.0, -0.01030800025910139, 0.013167000375688076],
            [0.0, -0.002899999963119626, 0.006266000214964151],
            [0.0, -3.600000127335079e-05, 0.0005579999997280538],
            [0.0, -0.000526999996509403, -0.0017709999810904264],
            [0.0, -0.004147000145167112, -0.005373000167310238],
            [0.0, -0.018789000809192657, -0.012399000115692616],
            [0.0, -0.034738000482320786, -0.016992000862956047],
            [0.0, -0.06430800259113312, -0.022407999262213707],
            [0.0, -0.12830199301242828, -0.028172999620437622],
            [0.0, -0.22743499279022217, -0.030472999438643456],
            [0.0, -0.3275589942932129, -0.029277000576257706],
            [0.0, -0.4503369927406311, -0.025397000834345818],
            [0.0, -0.8752819895744324, -0.004856999963521957],
            [0.0, -0.9999809861183167, -0.0005810000002384186],
        ])+shiftV

    elif(quality=='medium'):

        coords=scale*np.array([
            [0.0, -1.0000189542770386, 0.0005810000002384186],
            [0.0, -0.9544579982757568, 0.006027999799698591],
            [0.0, -0.7666599750518799, 0.03234399855136871],
            [0.0, -0.7114930152893066, 0.03886000066995621],
            [0.0, -0.6451590061187744, 0.045531999319791794],
            [0.0, -0.5675569772720337, 0.051844000816345215],
            [0.0, -0.47876399755477905, 0.05726800113916397],
            [0.0, -0.40112799406051636, 0.06015000119805336],
            [0.0, -0.334663987159729, 0.06102199852466583],
            [0.0, -0.268436998128891, 0.06005600094795227],
            [0.0, -0.20258300006389618, 0.05681300163269043],
            [0.0, -0.14841599762439728, 0.051747001707553864],
            [0.0, -0.10597000271081924, 0.04551300033926964],
            [0.0, -0.08528699725866318, 0.0414309985935688],
            [0.0, -0.06520300358533859, 0.03653499856591225],
            [0.0, -0.03708000108599663, 0.027331000193953514],
            [0.0, -0.02121100015938282, 0.02003300003707409],
            [0.0, -0.01030800025910139, 0.013167000375688076],
            [0.0, -0.002899999963119626, 0.006266000214964151],
            [0.0, -0.0008559999987483025, 0.003131000092253089],
            [0.0, -3.600000127335079e-05, 0.0005579999997280538],
            [0.0, -0.000526999996509403, -0.0017709999810904264],
            [0.0, -0.004147000145167112, -0.005373000167310238],
            [0.0, -0.0091540003195405, -0.008364999666810036],
            [0.0, -0.018789000809192657, -0.012399000115692616],
            [0.0, -0.034738000482320786, -0.016992000862956047],
            [0.0, -0.06430800259113312, -0.022407999262213707],
            [0.0, -0.09589699655771255, -0.02593900077044964],
            [0.0, -0.12830199301242828, -0.028172999620437622],
            [0.0, -0.17214199900627136, -0.02982199937105179],
            [0.0, -0.22743499279022217, -0.030472999438643456],
            [0.0, -0.3275589942932129, -0.029277000576257706],
            [0.0, -0.4503369927406311, -0.025397000834345818],
            [0.0, -0.5844870209693909, -0.0194690003991127],
            [0.0, -0.8752819895744324, -0.004856999963521957],
            [0.0, -0.9999809861183167, -0.0005810000002384186],
        ])+shiftV

    elif(quality=='full'):
        #
         coords=scale*np.array([
             [0.0, -1.0000189542770386, 0.0005810000002384186],
             [0.0, -0.9863420128822327, 0.0019630000460892916],
             [0.0, -0.9544579982757568, 0.006027999799698591],
             [0.0, -0.832876980304718, 0.0234570000320673],
             [0.0, -0.7666599750518799, 0.03234399855136871],
             [0.0, -0.7114930152893066, 0.03886000066995621],
             [0.0, -0.6451590061187744, 0.045531999319791794],
             [0.0, -0.5675569772720337, 0.051844000816345215],
             [0.0, -0.5231450200080872, 0.05480799823999405],
             [0.0, -0.47876399755477905, 0.05726800113916397],
             [0.0, -0.4343999922275543, 0.0591449998319149],
             [0.0, -0.40112799406051636, 0.06015000119805336],
             [0.0, -0.36787399649620056, 0.060787998139858246],
             [0.0, -0.334663987159729, 0.06102199852466583],
             [0.0, -0.3015190064907074, 0.060798000544309616],
             [0.0, -0.268436998128891, 0.06005600094795227],
             [0.0, -0.2354239970445633, 0.058754999190568924],
             [0.0, -0.20258300006389618, 0.05681300163269043],
             [0.0, -0.16997599601745605, 0.054085999727249146],
             [0.0, -0.14841599762439728, 0.051747001707553864],
             [0.0, -0.1270570009946823, 0.04891600087285042],
             [0.0, -0.10597000271081924, 0.04551300033926964],
             [0.0, -0.08528699725866318, 0.0414309985935688],
             [0.0, -0.06520300358533859, 0.03653499856591225],
             [0.0, -0.04606800153851509, 0.030664000660181046],
             [0.0, -0.03708000108599663, 0.027331000193953514],
             [0.0, -0.028689999133348465, 0.023747999221086502],
             [0.0, -0.02121100015938282, 0.02003300003707409],
             [0.0, -0.015014000236988068, 0.016409000381827354],
             [0.0, -0.01030800025910139, 0.013167000375688076],
             [0.0, -0.006947000045329332, 0.01044199988245964],
             [0.0, -0.002899999963119626, 0.006266000214964151],
             [0.0, -0.0008559999987483025, 0.003131000092253089],
             [0.0, -3.600000127335079e-05, 0.0005579999997280538],
             [0.0, -5.700000110664405e-05, -0.000615999975707382],
             [0.0, -0.000526999996509403, -0.0017709999810904264],
             [0.0, -0.0025599999353289604, -0.004110999871045351],
             [0.0, -0.004147000145167112, -0.005373000167310238],
             [0.0, -0.0091540003195405, -0.008364999666810036],
             [0.0, -0.018789000809192657, -0.012399000115692616],
             [0.0, -0.02610200084745884, -0.014727000147104263],
             [0.0, -0.034738000482320786, -0.016992000862956047],
             [0.0, -0.044179998338222504, -0.019040999934077263],
             [0.0, -0.06430800259113312, -0.022407999262213707],
             [0.0, -0.09589699655771255, -0.02593900077044964],
             [0.0, -0.12830199301242828, -0.028172999620437622],
             [0.0, -0.17214199900627136, -0.02982199937105179],
             [0.0, -0.22743499279022217, -0.030472999438643456],
             [0.0, -0.27187299728393555, -0.030239000916481018],
             [0.0, -0.3275589942932129, -0.029277000576257706],
             [0.0, -0.38332900404930115, -0.027759000658988953],
             [0.0, -0.4503369927406311, -0.025397000834345818],
             [0.0, -0.5844870209693909, -0.0194690003991127],
             [0.0, -0.8752819895744324, -0.004856999963521957],
             [0.0, -0.9421659708023071, -0.0021699999924749136],
             [0.0, -0.9999809861183167, -0.0005810000002384186]
         ])+shiftV

    else:
        raise Exception("unknown quality: "+str(quality)) 

    return coords        

#---------------------------------------------


# Returns the index of the leading edge per quality
# As explained above, the leadingedge is at [0,0,0]
#@staticmethod
def leadingEdgeIdx(quality):

    if(quality=='low'):
        idx=16
    elif(quality=='medium'):
        idx=20
    elif(quality=='full'):
        idx=33
    else:
        raise Exception("unknown quality") 

    return idx
 
